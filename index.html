<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="theme-color" content="#000000" />
<title>TradingView — ALL-IN-ONE (Advanced Chart + Lightweight + Charting Library + Widgets)</title>

<!-- ===== Styles: Real black + TradingView-like accents ===== -->
<style>
  :root{
    --bg: #000000;            /* true black */
    --panel: #0b0b0d;
    --muted: #99a3ad;
    --accent: #00b894;        /* trading green accent */
    --btn-text: #071219;
    --radius: 10px;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color: #e6eef6;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--muted);-webkit-font-smoothing:antialiased}
  a{color:inherit}
  header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;max-width:1300px;margin:0 auto}
  .logo{display:flex;align-items:center;gap:10px;color:#fff;font-weight:700}
  .nav{display:flex;gap:14px;align-items:center}
  .nav a{color:var(--muted);font-weight:600;font-size:15px}
  .btn-primary{background:var(--accent);color:var(--btn-text);padding:8px 12px;border-radius:8px;font-weight:700;border:0;cursor:pointer}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
  .container{max-width:1300px;margin:18px auto;padding:0 18px;display:flex;flex-direction:column;gap:18px}
  .hero{display:flex;gap:18px;align-items:center;justify-content:space-between;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);padding:20px;border-radius:12px}
  .hero h1{color:#fff;font-size:clamp(20px,3.5vw,36px);margin:0}
  .hero p{color:var(--muted);margin:8px 0 0}
  main{display:grid;grid-template-columns:1fr 360px;gap:18px}
  .panel{background:var(--panel);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
  .tv-widget-wrap{background:#000;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  .specs{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px;color:var(--muted);font-size:14px}
  .specs h4{color:#fff;margin:0 0 6px 0;font-size:15px}
  .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  footer{color:var(--muted);text-align:center;padding:12px 0;font-size:14px}
  .widget-row{display:flex;gap:12px;flex-wrap:wrap}
  .market-cards{display:flex;gap:10px;flex-wrap:wrap}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));padding:10px;border-radius:10px;min-width:120px;color:#fff}
  .watchlist .row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
  .muted{color:var(--muted)}
  @media (max-width:980px){
    main{grid-template-columns:1fr}
    .hero{flex-direction:column;align-items:flex-start}
  }
</style>
</head>
<body>
  <!-- ===== Header / Navbar ===== -->
  <header>
    <div class="logo" aria-hidden="false">
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><rect width="24" height="24" rx="5" fill="#0b0b0d"/><path d="M3 17 L8 10 L12 14 L21 5" stroke="#00b894" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
      TradingView — All-In-One Demo
    </div>

    <nav class="nav" aria-label="Main navigation">
      <a href="#">Products</a>
      <a href="#">Markets</a>
      <a href="#">Community</a>
      <a href="#">Brokers</a>
      <a href="#">Pricing</a>
      <button class="btn-ghost" onclick="alert('Login flow is placeholder')">Login</button>
      <button class="btn-primary">Sign up — Free</button>
    </nav>
  </header>

  <div class="container" role="main">
    <!-- ===== Hero ===== -->
    <section class="hero" aria-labelledby="hero-heading">
      <div style="flex:1">
        <h1 id="hero-heading">Where the world charts, chats, and trades markets</h1>
        <p>Real TradingView widgets + Lightweight Charts + Charting Library template — dark theme & original accent colors.</p>
        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn-primary" onclick="scrollToId('tradingview_chart')">Launch Advanced Chart</button>
          <button class="btn-ghost" onclick="scrollToId('lightweight_chart')">Lightweight Demo</button>
          <button class="btn-ghost" onclick="scrollToId('charting_library')">Charting Library</button>
        </div>

        <div style="margin-top:16px">
          <div class="market-cards">
            <div class="card"><strong>SPX</strong><div class="muted">4,567 • +0.72%</div></div>
            <div class="card"><strong>BTC</strong><div class="muted">42,987 • +1.9%</div></div>
            <div class="card"><strong>AUDUSD</strong><div class="muted">0.6473 • -0.12%</div></div>
          </div>
        </div>
      </div>

      <aside style="width:320px">
        <div class="panel" style="display:flex;flex-direction:column;gap:8px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><strong style="color:#fff">BTC / USD</strong><div style="font-size:12px;color:var(--muted)">Realtime</div></div>
            <div style="text-align:right;color:#00ffb3;font-weight:700">+1.9%</div>
          </div>

          <!-- Mini symbol overview widget placeholder -->
          <div id="mini_symbol" class="tv-widget-wrap" style="height:110px"></div>

          <div style="text-align:center">
            <button class="btn-primary" style="width:100%">Open Chart</button>
          </div>
        </div>
      </aside>
    </section>

    <!-- ===== Ticker tape row (TradingView widget) ===== -->
    <section class="panel" id="ticker_row" style="padding:10px;">
      <!-- TradingView Ticker Tape embed (external script below handles it) -->
      <div style="height:56px;" id="ticker_tape_container"></div>
    </section>

    <!-- ===== Main: Advanced Chart (left) + sidebar (right) ===== -->
    <main>
      <!-- Left: Advanced Chart (official TradingView widget) -->
      <section class="panel" style="padding:10px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div style="color:var(--muted)">Top toolbar: Symbol • Timeframe • Indicators • Templates • Save</div>
          <div style="display:flex;gap:8px">
            <button class="btn-ghost" onclick="downloadSnapshot()">Snapshot</button>
            <button class="btn-ghost" onclick="alert('Share placeholder')">Share</button>
          </div>
        </div>

        <!-- TradingView Advanced Chart -->
        <div id="tradingview_chart" class="tv-widget-wrap" style="height:640px;"></div>

        <!-- Short features list -->
        <div class="specs" style="margin-top:12px">
          <div><h4>Chart Area</h4><div class="muted">Candles, indicators, multi-pane layout, crosshair, tooltips.</div></div>
          <div><h4>Drawing Tools</h4><div class="muted">Trend lines, fibs, shapes, text, measurements.</div></div>
          <div><h4>Trading Panel</h4><div class="muted">Order ticket (buy/sell), positions, history — broker integration required.</div></div>
          <div><h4>DOM / Order Book</h4><div class="muted">Depth of Market (where supported by broker/instrument).</div></div>
        </div>
      </section>

      <!-- Right sidebar -->
      <aside style="display:flex;flex-direction:column;gap:12px">
        <div class="panel watchlist">
          <h4 style="margin:0 0 8px 0;color:#fff">Watchlist</h4>
          <div class="row"><div style="color:#fff">BTCUSD</div><div class="muted">42,987</div></div>
          <div class="row"><div style="color:#fff">AAPL</div><div class="muted">176.22</div></div>
          <div class="row"><div style="color:#fff">EURUSD</div><div class="muted">1.0842</div></div>
        </div>

        <div class="panel" id="market_overview_panel">
          <h4 style="margin:0 0 8px 0;color:#fff">Market Overview</h4>
          <!-- Market Overview widget placeholder — external script will fill -->
          <div id="market_overview_widget" style="height:230px" class="tv-widget-wrap"></div>
        </div>

        <div class="panel">
          <h4 style="margin:0 0 8px 0;color:#fff">Trading Panel</h4>
          <div style="display:flex;gap:8px">
            <button class="btn-primary" style="flex:1">Buy</button>
            <button class="btn-ghost" style="flex:1">Sell</button>
          </div>
          <div style="margin-top:8px;color:var(--muted)">Orders, positions & history appear here when connected to a broker.</div>
        </div>
      </aside>
    </main>

    <!-- ===== Middle: Lightweight Charts demo + Screener + Heatmap + Economic Calendar ===== -->
    <section class="grid-2" style="gap:12px">
      <!-- Lightweight Charts (self-hosted via CDN) -->
      <div class="panel" id="lightweight_chart">
        <h3 style="margin:0 0 8px 0;color:#fff">Lightweight Charts — Demo</h3>
        <div id="lw_chart" class="tv-widget-wrap" style="height:320px"></div>
        <div style="margin-top:8px;color:var(--muted)">Lightweight Charts is small & fast — you provide data feed (sample included below).</div>
      </div>

      <!-- Screener + Heatmap + Economic Calendar widgets area -->
      <div style="display:flex;flex-direction:column;gap:12px">
        <div class="panel" id="screener_widget" style="min-height:150px">
          <h4 style="margin:0 0 8px 0;color:#fff">Stock Screener</h4>
          <div id="screener_container" class="tv-widget-wrap" style="height:150px"></div>
        </div>

        <div class="panel" id="heatmap_widget" style="min-height:150px">
          <h4 style="margin:0 0 8px 0;color:#fff">Heatmap</h4>
          <div id="heatmap_container" class="tv-widget-wrap" style="height:150px"></div>
        </div>

        <div class="panel" id="economic_calendar_widget" style="min-height:110px">
          <h4 style="margin:0 0 8px 0;color:#fff">Economic Calendar</h4>
          <div id="economic_calendar_container" class="tv-widget-wrap" style="height:110px"></div>
        </div>
      </div>
    </section>

    <!-- ===== Charting Library: placeholder + template (requires download) ===== -->
    <section class="panel" id="charting_library">
      <h3 style="margin:0 0 8px 0;color:#fff">TradingView Charting Library — Integration Template</h3>
      <div style="color:var(--muted);margin-bottom:10px">
        The Charting Library is a separate download from TradingView and must be hosted by you.
        Place the Charting Library files under <code style="color:#fff">/charting_library/</code> and update the path below if different.
      </div>

      <!-- Charting library div (will work after you host charting_library files) -->
      <div id="charting_library_container" class="tv-widget-wrap" style="height:480px"></div>

      <div style="margin-top:10px;color:var(--muted)">
        <strong>Notes:</strong>
        <ul>
          <li>Download Charting Library from TradingView (requires agreement) and host files under <code>/charting_library/</code>.</li>
          <li>Once hosted, uncomment the <code>&lt;script src="/charting_library/charting_library.min.js"&gt;&lt;/script&gt;</code> include below and the initialization script will create a full Charting Library instance inside the container.</li>
        </ul>
      </div>
    </section>

    <!-- ===== Full list of landing-page sections & UI components (brief per your request) ===== -->
    <section class="panel">
      <h3 style="margin:0 0 12px 0;color:#fff">All Landing Sections & Platform UI Components — Features (concise)</h3>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div><strong>Header / Navbar</strong><div class="muted">Products • Markets • Community • Brokers • Pricing • Login/Signup.</div></div>
        <div><strong>Hero Section</strong><div class="muted">Big headline • CTA • background/illustration • quick access to chart & tools.</div></div>
        <div><strong>Market Overview</strong><div class="muted">Indices • Crypto • Forex • Commodities • Bonds cards + sparklines.</div></div>
        <div><strong>Features Highlights</strong><div class="muted">Charting • Screeners • Alerts • Heatmaps • Pine Script • Data coverage.</div></div>
        <div><strong>Community</strong><div class="muted">Ideas stream • Scripts • Analysts & followers • Comments & likes.</div></div>
        <div><strong>Broker / Trading</strong><div class="muted">Connect brokers • Trade on charts • orders & margin info.</div></div>
        <div><strong>Business</strong><div class="muted">Widgets • Charting libraries • API • licensing.</div></div>
        <div><strong>Footer</strong><div class="muted">Company • Legal • Blog • Social • Support • Status.</div></div>

        <div><strong>Top Toolbar</strong><div class="muted">Symbol search • Timeframes • Chart types • Indicators • Templates • Snapshot.</div></div>
        <div><strong>Left Toolbar</strong><div class="muted">Trend lines • Fib • Shapes • Text • Measure tools.</div></div>
        <div><strong>Chart Area</strong><div class="muted">Price chart • Indicators • Y-axis • X-axis • marker events.</div></div>
        <div><strong>Right Sidebar</strong><div class="muted">Watchlist • Details • News • Alerts • Object tree.</div></div>
        <div><strong>Bottom Panel</strong><div class="muted">Strategy tester • Pine Editor • Logs.</div></div>
        <div><strong>Trading Panel</strong><div class="muted">Order ticket • Buy/Sell • Positions • Orders • History.</div></div>
        <div><strong>Depth of Market</strong><div class="muted">Order book + price ladder.</div></div>
      </div>
    </section>

    <footer>
      © <span id="year"></span> TradingView — All-In-One demo • Widgets load from TradingView. Not affiliated with TradingView, Inc.
    </footer>
  </div>

  <!-- ===== PWA: runtime manifest + service worker (single-file PWA) ===== -->
  <script>
    // embed manifest dynamically (single file)
    const manifest = {
      name: "TradingView All-In-One Demo",
      short_name: "TV All-In-One",
      start_url: ".",
      display: "standalone",
      background_color: "#000000",
      theme_color: "#000000",
      icons: [
        {src: "data:image/svg+xml;base64," + btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect width="64" height="64" rx="12" fill="#000"/><path d="M8 46 L26 24 L36 32 L56 10" stroke="#00b894" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>'), sizes: "64x64", type: "image/svg+xml" }
      ]
    };
    const mfBlob = new Blob([JSON.stringify(manifest)], {type:'application/json'});
    const mfUrl = URL.createObjectURL(mfBlob);
    const link = document.createElement('link'); link.rel='manifest'; link.href=mfUrl; document.head.appendChild(link);

    // runtime service worker (caches shell)
    const swCode = `
      const CACHE = 'tv-all-in-one-shell-v1';
      const assets = ['.'];
      self.addEventListener('install', e => {
        self.skipWaiting();
        e.waitUntil(caches.open(CACHE).then(c => c.addAll(assets)));
      });
      self.addEventListener('fetch', e => {
        if (e.request.method !== 'GET') return;
        e.respondWith(caches.match(e.request).then(r => r || fetch(e.request)));
      });
    `;
    try {
      const swBlob = new Blob([swCode], {type:'text/javascript'});
      const swUrl = URL.createObjectURL(swBlob);
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register(swUrl).then(reg => console.log('SW Registered', reg.scope)).catch(err => console.warn('SW failed', err));
      }
    } catch(e){console.warn('SW creation failed', e)}

    document.getElementById('year').textContent = new Date().getFullYear();
    function scrollToId(id){ const el=document.getElementById(id); if(el) el.scrollIntoView({behavior:'smooth',block:'start'}) }
    function downloadSnapshot(){ alert('Snapshot requested (placeholder)'); }
  </script>

  <!-- ===== TradingView official library (tv.js) for Advanced Chart & some widgets ===== -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

  <!-- ===== Lightweight Charts (CDN) ===== -->
  <script src="https://unpkg.com/lightweight-charts@3.9.0/dist/lightweight-charts.standalone.production.js"></script>

  <!-- ===== Charting Library placeholder script include (uncomment when you host the lib) =====
       <script src="/charting_library/charting_library.min.js"></script>
       Make sure the folder /charting_library/ contains the TradingView Charting Library build files.
  -->

  <!-- ===== TradingView External Widgets (Ticker Tape, Market Overview, Screener, Heatmap, Economic Calendar) =====
       These external-embedding scripts inject widgets when included. They normally expect a JSON config inside a script tag
       (see TradingView widget generator for exact options). We will try to include them by name (s3 path) and then provide
       the JSON configuration for each widget inline below.
  -->

  <!-- Ticker Tape -->
  <script type="text/javascript">
    // Create the ticker tape container by injecting the official external script pattern
    (function(){
      const container = document.getElementById('ticker_tape_container');
      if(!container) return;
      const cfg = {
        "symbols": [
          {"proName":"FOREXCOM:SPXUSD","title":"S&P 500"},
          {"proName":"COINBASE:BTCUSD","title":"BTC/USD"},
          {"proName":"NASDAQ:AAPL","title":"AAPL"},
          {"proName":"FX:EURUSD","title":"EUR/USD"}
        ],
        "showSymbolLogo": true,
        "colorTheme": "dark",
        "isTransparent": true,
        "displayMode": "adaptive",
        "locale": "en"
      };
      // safest method: create an iframe with the official embed snippet — but we can attempt to load the external widget script
      const s = document.createElement('script');
      s.src = "https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js";
      s.async = true;
      s.innerHTML = JSON.stringify(cfg);
      container.appendChild(s);
    })();
  </script>

  <!-- Mini Symbol Overview -->
  <script type="text/javascript">
    (function(){
      const node = document.getElementById('mini_symbol');
      if(!node) return;
      const s = document.createElement('script');
      s.src = "https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js";
      s.async = true;
      s.innerHTML = JSON.stringify({
        "symbol": "COINBASE:BTCUSD",
        "width": "100%",
        "height": "110",
        "locale": "en",
        "dateRange": "1M",
        "colorTheme": "dark",
        "trendLineColor": "#00b894",
        "underLineColor": "rgba(0,184,148,0.15)",
        "isTransparent": true,
        "autosize": true
      });
      node.appendChild(s);
    })();
  </script>

  <!-- Market Overview widget -->
  <script type="text/javascript">
    (function(){
      const node = document.getElementById('market_overview_widget');
      if(!node) return;
      const s = document.createElement('script');
      s.src = "https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js";
      s.async = true;
      s.innerHTML = JSON.stringify({
        "colorTheme": "dark",
        "dateRange": "12M",
        "showChart": true,
        "locale": "en",
        "width": "100%",
        "height": "230",
        "largeChartUrl": "",
        "isTransparent": true,
        "symbolsGroups": [
          {"name":"Indices","symbols":[{"name":"S&P 500","displayName":"S&P 500","symbol":"FOREXCOM:SPXUSD"},{"name":"Dow 30","displayName":"Dow 30","symbol":"INDEX:DJI"}]},
          {"name":"Cryptocurrencies","symbols":[{"name":"Bitcoin","displayName":"BTCUSD","symbol":"COINBASE:BTCUSD"},{"name":"Ethereum","displayName":"ETHUSD","symbol":"COINBASE:ETHUSD"}]}
        ]
      });
      node.appendChild(s);
    })();
  </script>

  <!-- Screener widget -->
  <script type="text/javascript">
    (function(){
      const node = document.getElementById('screener_container');
      if(!node) return;
      const s = document.createElement('script');
      s.src = "https://s3.tradingview.com/external-embedding/embed-widget-screener.js";
      s.async = true;
      s.innerHTML = JSON.stringify({
        "width": "100%",
        "height": "150",
        "defaultColumn": "overview",
        "screener_type": "stock",
        "displayCurrency": "USD",
        "colorTheme": "dark",
        "locale": "en"
      });
      node.appendChild(s);
    })();
  </script>

  <!-- Heatmap widget -->
  <script type="text/javascript">
    (function(){
      const node = document.getElementById('heatmap_container');
      if(!node) return;
      const s = document.createElement('script');
      s.src = "https://s3.tradingview.com/external-embedding/embed-widget-hotlists.js";
      s.async = true;
      s.innerHTML = JSON.stringify({
        "width": "100%",
        "height": "150",
        "colorTheme": "dark",
        "locale": "en"
      });
      node.appendChild(s);
    })();
  </script>

  <!-- Economic Calendar widget -->
  <script type="text/javascript">
    (function(){
      const node = document.getElementById('economic_calendar_container');
      if(!node) return;
      const s = document.createElement('script');
      s.src = "https://s3.tradingview.com/external-embedding/embed-widget-economic-calendar.js";
      s.async = true;
      s.innerHTML = JSON.stringify({
        "width": "100%",
        "height": "110",
        "colorTheme": "dark",
        "isTransparent": true,
        "locale": "en"
      });
      node.appendChild(s);
    })();
  </script>

  <!-- ===== TradingView Advanced Chart init (tv.js) ===== -->
  <script type="text/javascript">
    (function waitForTV(){
      if (typeof TradingView === 'undefined') {
        // tv.js not loaded yet — wait a short time
        return setTimeout(waitForTV, 150);
      }

      // Advanced Chart widget (official hosted widget)
      new TradingView.widget({
        "autosize": true,
        "symbol": "NASDAQ:AAPL",    // change default symbol as required
        "interval": "D",
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#000000",
        "enable_publishing": false,
        "allow_symbol_change": true,
        "hide_side_toolbar": false,
        "details": true,
        "container_id": "tradingview_chart"
      });
    })();
  </script>

  <!-- ===== Lightweight Charts demo implementation ===== -->
  <script>
    (function(){
      try {
        const chartEl = document.getElementById('lw_chart');
        if(!chartEl) return;
        const chart = LightweightCharts.createChart(chartEl, {
          width: chartEl.clientWidth,
          height: 320,
          layout: { backgroundColor: '#000000', textColor: '#e6eef6' },
          grid: { vertLines: { color: 'rgba(255,255,255,0.02)' }, horzLines: { color: 'rgba(255,255,255,0.02)' } },
          rightPriceScale: { borderColor: 'rgba(255,255,255,0.03)' },
          timeScale: { borderColor: 'rgba(255,255,255,0.03)' }
        });
        const series = chart.addCandlestickSeries({
          upColor: '#26a69a',
          downColor: '#ef5350',
          borderDownColor: '#ef5350',
          borderUpColor: '#26a69a',
          wickDownColor: '#ef5350',
          wickUpColor: '#26a69a'
        });

        // sample random-walk data (replace with real feed)
        const now = Date.now();
        const data = [];
        let base = 43000;
        for (let i = 60; i >= 0; i--) {
          const time = Math.floor((now - i * 24 * 60 * 60 * 1000) / 1000);
          const open = base + (Math.random() - 0.5) * 200;
          const close = open + (Math.random() - 0.5) * 200;
          const high = Math.max(open, close) + Math.random() * 80;
          const low = Math.min(open, close) - Math.random() * 80;
          data.push({ time: time, open: Math.round(open), high: Math.round(high), low: Math.round(low), close: Math.round(close) });
          base = close;
        }
        series.setData(data);

        // responsive resize
        window.addEventListener('resize', ()=> {
          chart.applyOptions({ width: chartEl.clientWidth });
        });
      } catch (e) { console.warn('Lightweight Charts init failed', e) }
    })();
  </script>

  <!-- ===== Charting Library initialization template (requires you to host the lib) ===== -->
  <script type="text/javascript">
    (function(){
      // This only runs if charting_library is present on your host. If not present, it will safely do nothing.
      if (!window.TradingView || !window.TradingView.onready) {
        // Charting library (self-hosted) usually provides a global constructor `TradingView` as well.
      }
      // Example template (uncomment & adjust when you host Charting Library files):
      /* 
      if (window.TradingView && window.TradingView.ChartingLibraryWidget) {
        new TradingView.ChartingLibraryWidget({
          symbol: 'NASDAQ:AAPL',
          interval: 'D',
          container_id: 'charting_library_container',
          library_path: '/charting_library/',         // <-- ensure charting_library files are hosted here
          locale: 'en',
          disabled_features: ['use_localstorage_for_settings'],
          enabled_features: ['study_templates'],
          overrides: { 'mainSeriesProperties.candleStyle.upColor': '#26a69a', 'mainSeriesProperties.candleStyle.downColor': '#ef5350' }
        });
      }
      */
    })();
  </script>

  <!-- ===== Small script to handle cases where external widgets fail (graceful fallback) ===== -->
  <script>
    // provide fallbacks for widgets that might not load if external scripts are blocked
    window.addEventListener('load', function(){
      // If mini symbol didn't get filled, create a small fallback
      const mini = document.getElementById('mini_symbol');
      if (mini && mini.innerHTML.trim() === '') {
        mini.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;color:var(--muted)">BTC / USD — mini overview</div>';
      }
      // Ticker tape fallback
      const ticker = document.getElementById('ticker_tape_container');
      if (ticker && ticker.innerHTML.trim() === '') {
        ticker.innerHTML = '<div style="display:flex;align-items:center;gap:12px;height:56px;padding:8px;color:var(--muted)"><strong style="color:#fff">S&P 500</strong> 4,567 • <strong style="color:#00ffb3">+0.72%</strong> — <strong style="color:#fff">BTCUSD</strong> 42,987 • <strong style="color:#00ffb3">+1.9%</strong></div>';
      }
    });
  </script>

</body>
  </html>
